{% extends "base.html" %}

{% block content %}
<h2>Váš profil</h2>

<div>
    <h3>Osobní informace</h3>
    <p><strong>Uživatelské jméno:</strong> {{ user.username }}</p>
    <p><strong>Jméno:</strong> {{ user.first_name }}</p>
    <p><strong>Příjmení:</strong> {{ user.last_name }}</p>
    <p><strong>E-mail:</strong> {{ user.email }}</p>
    <p><strong>Telefon:</strong> {{ user.phone }}</p>
    <p><strong>Avatar:</strong></p>
    {% if user.avatar %}
        <img src="{{ user.avatar }}" alt="Avatar" style="max-width: 150px; height: auto;">
    {% else %}
        <p>Nemáte nahrán žádný avatar.</p>
    {% endif %}
    <p><strong>Preferovaný komunikační kanál:</strong> {{ user.get_preferred_channel_display }}</p>
    <p><strong>Typ účtu:</strong> {{ user.get_account_type_display }}</p>
</div>

<hr>

<div>
<div>
<h3>Moje objednávky</h3>
{% if recent_orders %}
    <ul>
    {% for order in recent_orders %}
        <li>
            <a href="{% url 'order_detail' order.id %}">
                {% with order.id|stringformat:"08d" as formatted_id %}
                    Objednávka #{{ formatted_id }} - {{ order.get_order_state_display }}
                {% endwith %}
            </a> ({{ order.order_creation_datetime|date:"d.m.Y H:i" }})
        </li>
    {% endfor %}
    </ul>
    <a href="{% url 'my_orders' %}">Zobrazit všechny objednávky</a>
{% else %}
    <p>Nemáte žádné objednávky.</p>
{% endif %}


</div>
    <h3>Používaná adresa</h3>
    {% if primary_address %}
        <p>
                    {{ primary_address.first_name }} {{ primary_address.last_name }}<br>
                    {{ primary_address.street }} {{ primary_address.street_number }}<br>
                    {{ primary_address.city }}, {{ primary_address.postal_code }}<br>
                    {{ primary_address.country }}<br>
                    <strong>E-mail:</strong> {{ primary_address.email }}
        </p>
    {% else %}
        <p>Nemáte žádné uložené adresy.</p>
    {% endif %}
</div>

<hr>

<div>
    <a href="{% url 'edit_profile' %}">Upravit profil</a> |
    <a href="{% url 'change_password' %}">Změnit heslo</a> |
    <a href="{% url 'logout' %}">Odhlásit se</a>
</div>

{% endblock %}
